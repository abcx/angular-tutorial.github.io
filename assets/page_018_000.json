{"background":{"class":"border_1"},"controls":{"l":"false","r":"false","t":"false","b":"false"},"subtitle":{"selector":"subtitle","text":"editor.component"},"lead":{"selector":"lead","class":"","text":"Zapis zmienionych danych."},"code":[{"type":"typescript","class":"height_50","code":"import { Injectable } from '@angular/core';\nimport { Headers, Http } from '@angular/http';\nimport 'rxjs/add/operator/toPromise';\nimport { FakeData } from '../classes/fake-data';\n\n@Injectable()\nexport class TableService {\n    \n    private apiUrl = 'api/data';\n    public  tableParams = {\n                small: true,\n                striped: false,\n                bordered: false,\n                hover: false\n            };\n    public tableData: FakeData[];   // NEW\n\n    constructor(\n        private http: Http\n    ) { }\n\n    // CHANGED\n    getData(): Promise<FakeData[]> {\n        return this.http.get(this.apiUrl)\n                   .toPromise()\n                   .then((response) => {\n                        this.tableData = response.json().data as FakeData[];\n                        return this.tableData;\n                    })\n                   .catch(this.handleError);\n    }\n    \n    getItemData(id: number): Promise<FakeData> {\n        return this.http.get(this.apiUrl)\n                   .toPromise()\n                   .then(response => response.json().data[id] as FakeData)\n                   .catch(this.handleError);\n    }\n    // NEW\n    saveData(data: FakeData) {\n        this.tableData[data.id] = data;\n    }\n    private handleError(error: any): Promise<any> {\n        console.error('An error occurred', error);\n        return Promise.reject(error.message || error);\n    }\n}\n","filename":"table.service.ts"},{"type":"html","class":"height_25","code":"<h3>{{title}}</h3>\n\n<table class=\"table\" [ngClass]=\"manageTableClass()\">\n    <thead class=\"thead-inverse\">\n        <tr>\n            <th>id</th>\n            <th>item</th>\n            <th>text</th>\n            <th>date</th>\n        </tr>\n    </thead>\n    <tbody>\n        <!-- CHANGED -->\n        <tr *ngFor=\"let d of ts.tableData\" [ngClass]=\"manageRowClass(d.id)\">\n            <td>{{d.id}}</td>\n            <td>{{d.item}}</td>\n            <td>{{d.text}}</td>\n            <td>{{d.date}}</td>\n            <td class=\"buttons\">\n                <div class=\"glyphicon glyphicon-edit text-primary\" (click)=\"editItem(d)\" title=\"Edytuj element\"></div>\n                <div class=\"glyphicon glyphicon-trash text-danger\" (click)=\"editItem(d, true)\" title=\"Usuń element\"></div>\n            </td>\n        </tr>\n    </tbody>\n</table>\n","filename":"table.component.html"}]}